<?php

// ================== PHP : ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MySQL ==================

$host = "localhost";

$user = "root";

$pass = "";

$db   = "exampledb";

$conn = new mysqli($host, $user, $pass);

$conn->set_charset("utf8");

if ($conn->connect_error) {

    die("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");

}

// ================== ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ==================

$conn->query("CREATE DATABASE IF NOT EXISTS $db CHARACTER SET utf8mb4");

$conn->select_db($db);

// ================== ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á ==================

$conn->query("

CREATE TABLE IF NOT EXISTS projects (

    id INT AUTO_INCREMENT PRIMARY KEY,

    title VARCHAR(100),

    detail TEXT

)");

$conn->query("

CREATE TABLE IF NOT EXISTS users (

    id INT AUTO_INCREMENT PRIMARY KEY,

    name VARCHAR(100),

    age INT

)");

$conn->query("

CREATE TABLE IF NOT EXISTS people (

    id INT AUTO_INCREMENT PRIMARY KEY,

    name VARCHAR(100),

    age INT,

    gender VARCHAR(20)

)");

// ================== ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) ==================

$conn->query("INSERT IGNORE INTO projects VALUES

(1,'‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£','‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢')");

$conn->query("INSERT IGNORE INTO people VALUES

(1,'‡∏™‡∏°‡∏ä‡∏≤‡∏¢',30,'‡∏ä‡∏≤‡∏¢'),

(2,'‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á',28,'‡∏´‡∏ç‡∏¥‡∏á'),

(3,'‡∏™‡∏°‡∏õ‡∏≠‡∏á',25,'‡∏ä‡∏≤‡∏¢')");

// ================== ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏° ==================

if (isset($_POST['addUser'])) {

    $name = $_POST['name'];

    $age  = $_POST['age'];

    $conn->query("INSERT INTO users (name, age) VALUES ('$name','$age')");

}

// ================== ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ==================

$projects = $conn->query("SELECT * FROM projects");

$users    = $conn->query("SELECT * FROM users");

$people   = $conn->query("SELECT * FROM people");

$title = "‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á PHP + JS + HTML + CSS + Database";

$date  = date("d/m/Y");

?>

<!DOCTYPE html>

<html lang="th">

<head>

<meta charset="UTF-8">

<title><?php echo $title; ?></title>

<style>

body {

    font-family: Arial, sans-serif;

    background-color: #f4f6f7;

    text-align: center;

    padding: 30px;

}

h2 {

    color: #1f618d;

}

table {

    border-collapse: collapse;

    margin: 20px auto;

    width: 70%;

    background: white;

}

th, td {

    border: 1px solid #2980b9;

    padding: 10px;

}

th {

    background-color: #2980b9;

    color: white;

}

tr:hover {

    background-color: #d6eaf8;

    cursor: pointer;

}

form {

    margin: 20px;

}

input, button {

    padding: 8px;

    margin: 5px;

}

button {

    background: #2980b9;

    color: white;

    border: none;

    border-radius: 5px;

}

footer {

    margin-top: 30px;

    color: #7f8c8d;

}

</style>

<script>

function showDetail(text) {

    alert(text);

}

function showPerson(name, age, gender) {

    alert("‡∏ä‡∏∑‡πà‡∏≠: " + name + "\n‡∏≠‡∏≤‡∏¢‡∏∏: " + age + "\n‡πÄ‡∏û‡∏®: " + gender);

}

</script>

</head>

<body>

<h2><?php echo $title; ?></h2>

<!-- ================== ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ================== -->

<h3>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</h3>

<table>

<tr>

    <th>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</th>

    <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>

</tr>

<?php while($p = $projects->fetch_assoc()): ?>

<tr onclick="showDetail('<?php echo addslashes($p['detail']); ?>')">

    <td><?php echo $p['title']; ?></td>

    <td><?php echo $p['detail']; ?></td>

</tr>

<?php endwhile; ?>

</table>

<!-- ================== ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ================== -->

<h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>

<form method="post">

    <input type="text" name="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" required>

    <input type="number" name="age" placeholder="‡∏≠‡∏≤‡∏¢‡∏∏" required>

    <button name="addUser">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

</form>

<!-- ================== ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ================== -->

<h3>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>

<table>

<tr>

    <th>‡∏ä‡∏∑‡πà‡∏≠</th>

    <th>‡∏≠‡∏≤‡∏¢‡∏∏</th>

</tr>

<?php while($u = $users->fetch_assoc()): ?>

<tr onclick="showDetail('‡∏ä‡∏∑‡πà‡∏≠: <?php echo $u['name']; ?> ‡∏≠‡∏≤‡∏¢‡∏∏: <?php echo $u['age']; ?>')">

    <td><?php echo $u['name']; ?></td>

    <td><?php echo $u['age']; ?></td>

</tr>

<?php endwhile; ?>

</table>

<!-- ================== ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ================== -->

<h3>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h3>

<table>

<tr>

    <th rowspan="2">‡∏ä‡∏∑‡πà‡∏≠</th>

    <th colspan="2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</th>

</tr>

<tr>

    <th>‡∏≠‡∏≤‡∏¢‡∏∏</th>

    <th>‡πÄ‡∏û‡∏®</th>

</tr>

<?php while($person = $people->fetch_assoc()): ?>

<tr onclick="showPerson('<?php echo $person['name']; ?>','<?php echo $person['age']; ?>','<?php echo $person['gender']; ?>')">

    <td><?php echo $person['name']; ?></td>

    <td><?php echo $person['age']; ?></td>

    <td><?php echo $person['gender']; ?></td>

</tr>

<?php endwhile; ?>

</table>

<footer>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: <?php echo $date; ?></footer>

</body>

</html>

